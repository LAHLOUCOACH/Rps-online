<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù„Ø¹Ø¨Ø© Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</title>
  <style>
    body {
      font-family: Tahoma, sans-serif;
      text-align: center;
      background: linear-gradient(to bottom, #e0f7fa, #fff);
      padding: 30px;
    }

    h1 {
      color: #00796b;
    }

    button {
      font-size: 24px;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #009688;
      color: white;
      transition: transform 0.2s ease;
    }

    button:hover {
      transform: scale(1.1);
    }

    #result {
      margin-top: 30px;
      font-size: 24px;
      font-weight: bold;
    }
  </style>
  <script type="module">
    // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Firebase Ù…Ù† CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
    const firebaseConfig = {
      apiKey: "AIzaSyDVArArvEDYGC5O5_xdGe9byZCI5ZDZ9p4",
      authDomain: "rps-online-game-8ef85.firebaseapp.com",
      databaseURL: "https://rps-online-game-8ef85-default-rtdb.firebaseio.com",
      projectId: "rps-online-game-8ef85",
      storageBucket: "rps-online-game-8ef85.appspot.com",
      messagingSenderId: "597782563294",
      appId: "1:597782563294:web:3e18fd2208e8438bc2dce5"
    };

    // ØªÙ‡ÙŠØ¦Ø© Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù„Ø§Ø¹Ø¨ (player1 Ø£Ùˆ player2)
    const myId = "player1";
    const opponentId = "player2";

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø±ÙƒØ© Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    function sendMove(move) {
      set(ref(db, "players/" + myId), {
        move: move,
        timestamp: Date.now()
      });
    }

    let myMove = null;
    let opponentMove = null;

    function compareMoves() {
      if (!myMove || !opponentMove) return;

      const resultDiv = document.getElementById("result");

      if (myMove === opponentMove) {
        resultDiv.innerText = "ğŸ¤ ØªØ¹Ø§Ø¯Ù„! ÙƒÙ„ Ù…Ù† Ø§Ø®ØªØ§Ø± " + myMove;
      } else if (
        (myMove === "rock" && opponentMove === "scissors") ||
        (myMove === "paper" && opponentMove === "rock") ||
        (myMove === "scissors" && opponentMove === "paper")
      ) {
        resultDiv.innerText = "ğŸ† ÙØ²Øª! Ø£Ù†Øª Ø§Ø®ØªØ±Øª " + myMove + " ÙˆØ§Ù„Ø®ØµÙ… " + opponentMove;
      } else {
        resultDiv.innerText = "ğŸ˜¢ Ø®Ø³Ø±Øª! Ø£Ù†Øª Ø§Ø®ØªØ±Øª " + myMove + " ÙˆØ§Ù„Ø®ØµÙ… " + opponentMove;
      }
    }

    function listenToOpponent() {
      const opponentRef = ref(db, "players/" + opponentId);
      onValue(opponentRef, (snapshot) => {
        const data = snapshot.val();
        if (data) {
          opponentMove = data.move;
          compareMoves();
        }
      });
    }

    window.onload = () => {
      listenToOpponent();
    };

    window.play = (move) => {
      myMove = move;
      sendMove(move);
      compareMoves();
    };
  </script>
</head>
<body>
  <h1>ğŸª¨ğŸ“„âœ‚ï¸ Ù„Ø¹Ø¨Ø© Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</h1>
  <p>Ø§Ø®ØªØ± Ø­Ø±ÙƒØªÙƒ:</p>
  <button onclick="play('rock')">ğŸª¨ Ø­Ø¬Ø±</button>
  <button onclick="play('paper')">ğŸ“„ ÙˆØ±Ù‚Ø©</button>
  <button onclick="play('scissors')">âœ‚ï¸ Ù…Ù‚Øµ</button>

  <div id="result">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø­Ø±ÙƒØ©...</div>
</body>
</html>